ğŸ§  What is Logical Replication?
Logical replication in PostgreSQL is a streaming-based, real-time data replication mechanism that replicates specific tables from one PostgreSQL instance to another â€” even across environments (cloud â†”ï¸ on-prem).
Unlike physical replication (which replicates the entire storage), logical replication only streams row-level data changes (INSERT, UPDATE, DELETE). 

ğŸ”€ Selective data sharing
ğŸŒ Multi-environment synchronization
ğŸ“Š Analytics offloading
ğŸš€ Incremental migrations
ğŸ¯ Key Use Cases
ğŸ“ˆ Real-time analytics/reporting offloaded to a replica
â˜ï¸ Hybrid cloud setups (cloud + on-prem)
ğŸ” Data migration from AWS RDS to local environments
ğŸ›¡ï¸ Disaster recovery planning

âœ… Step-by-Step Setup
ğŸ”¹ On AWS RDS PostgreSQL (Source)
Step 1: Modify RDS Parameter Group
Parameter Value
rds.logical_replication 1
wal_level logical
max_replication_slots 10
max_wal_senders 10
max_connections 100

Apply the parameter group to the RDS instance and reboot.

Step 2: Create a Replication User
CREATE ROLE replication_user WITH LOGIN REPLICATION PASSWORD 'Password';

Step 3: Create a Publication

CREATE PUBLICATION my_publication FOR ALL TABLES;

ğŸ”¹ On On-Prem PostgreSQL (Target)
Step 1: Update postgresql.conf

wal_level = logical
max_replication_slots = 10
max_wal_senders = 10
Restart the PostgreSQL service after changes.

Step 2: Edit pg_hba.conf
Add entries to allow replication from RDS (RDS IP):

host replication replication_user <RDS_Public_IP>/32 md5
Reload Post.conf

Step 3: Create the Subscription

CREATE SUBSCRIPTION my_subscription
CONNECTION 'host=<rds-endpoint> port=5432 dbname=database user=replication_user password=Password'
PUBLICATION my_publication
WITH (create_slot = true, enabled = true);

âœ… Advantages
ğŸ”„ Real-time sync between cloud and on-prem
ğŸ“Œ Selective table replication
ğŸ§© Low overhead using native PostgreSQL tools
â˜ï¸ Hybrid cloud ready
ğŸ“Š Ideal for reporting, analytics & DR environments

âš ï¸ Disadvantages
âŒ No DDL replication â€” schema changes arenâ€™t replicated
ğŸ§± Schema must match exactly
ğŸš« No user/password replication â€” roles and passwords must be managed manually
âš ï¸ No sequence synchronization
ğŸ›œ Network-dependent table, secure connection required 
ğŸ”’ Password stored in plain text in subscription string
ğŸ§° Requires manual monitoring and conflict handling
